<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:cc="http://java.sun.com/jsf/composite"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:SBAcaoNav="http://xmlns.jcp.org/jsf/composite/SBComp/composite/acoesENavegacao"
    xmlns:crmEmail="http://xmlns.jcp.org/jsf/composite/crm"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
    xmlns:f="http://xmlns.jcp.org/jsf/core">


    <!-- INTERFACE -->
    <cc:interface>
        <cc:attribute name="empresa"
                      type="com.super_bits.Casa_Nova.Intranet_Marketing_Digital.model.dados.crm.prospecto.Pessoa" required="true"/>



    </cc:interface>
    <!-- IMPLEMENTATION -->
    <cc:implementation>
        <h:panelGroup styleClass="Container12 OrganizadorContainerDireita" layout="block" >
            <h:panelGroup styleClass="Fright" layout="block" >
                <h:form>
                    <p:commandButton value="Alterar relacionamento" type="button" icon="pi pi-external-link"


                                     onclick="PF('gruposDeAcao').show()"/>
                </h:form>
            </h:panelGroup>
        </h:panelGroup>
        <p:dialog header="#{cc.attrs.empresa.relacionamento.nome}" widgetVar="gruposDeAcao"
                  minHeight="40" minWidth="600" showEffect="fade" modal="true" closeOnEscape="true"  >


            <h:panelGroup  styleClass="semBorda Container12 OrganizadorContainer" rendered="#{cc.attrs.empresa.atividadesMetaDisponiveis.size()>0}"  >



                <h:panelGroup layout="block" styleClass="Container12" >


                    <h:panelGroup styleClass="SbBotoesDeEscolha" layout="block"  >
                        <f:passThroughAttribute name="marcador" value="inputFormulario" />

                        <h:form>
                            <h:panelGroup layout="block" id="opcoesGrupo" styleClass="OrganizadorContainer" style="margin-left:  10px; border-style: groove; padding: 9px;  border-color: antiquewhite;" rendered="#{cc.attrs.empresa.meta.getCampoInstanciadoByNomeOuAnotacao('tiposAtividadeGrupoAtividade').valor.size()>0}" >
                                <p:blockUI
                                    rendered="#{pgUtil.getNomeIdPFieldSetPai(component)!=null}"
                                    block="#{pgUtil.getNomeIdPFieldSetPai(component)}"
                                    widgetVar="grupoAcaoBlcck"
                                    >
                                    <div style="
                                         z-index: 10000;
                                         position: absolute;
                                         margin-top: 0px;
                                         width: 200px;
                                         border: none !important;     padding: 0 !important;
                                         margin-left: 0px; "
                                         class="OrganizadorContainer"
                                         >
                                        <p:graphicImage
                                            name="images/preloader.gif" library="primefaces-adamantium"
                                            />
                                    </div>

                                </p:blockUI>
                                <ui:repeat value="#{cc.attrs.empresa.meta.getCampoInstanciadoByNomeOuAnotacao('tiposAtividadeGrupoAtividade').valor}" var="opc" varStatus="rec">




                                    <p:commandLink
                                        styleClass="#{opc ne paginaAtual.infoPagina.comoFormularioWeb.acaoSelecionada and (opc.relacionamentoGerado ne null and opc.relacionamentoGerado ne cc.attrs.empresa.relacionamento)?'':'clickDesativado'}"
                                        action="#{servicosCRM.iniciarAtividadeInicial(cc.attrs.empresa)}"
                                        onclick="PF('grupoAcaoBlcck').show();"
                                        >


                                        <div class="btnSeletor-big  #{opc ne paginaAtual.infoPagina.comoFormularioWeb.acaoSelecionada and (opc.relacionamentoGerado ne null and opc.relacionamentoGerado ne cc.attrs.empresa.relacionamento)?'':'btbig-selecionado'}  containerBtnSeletor OrganizadorContainer" style="border: 3px solid #007BFF; padding: 10px;"  >
                                            <h:panelGroup  layout="block" styleClass="OrganizadorContainer" >

                                                <h:panelGroup style="height: 50px;align-self: center;" layout="span">
                                                    <font color="##{opc.cor}" >
                                                        <div class="Container12" style=" color:##{opc.cor}!important;background-color:#{opc.cor}">
                                                            <i  class="#{opc.iconeAcao} fa fa-2x iconeBotaoQuadrado" style=""  > </i><br/>
                                                        </div>
                                                    </font>
                                                </h:panelGroup>

                                                <h:panelGroup styleClass="btnSeletor-label "
                                                              style="color: #000000; "
                                                              rendered="#{!pgUtil.isNuloOuEmbranco(opc.nomeAcao)}"
                                                              layout="block" >
                                                    <div style="display: table-cell; vertical-align: middle; height: 100px; width: 150px; ">
                                                        <h3 class="FontAdamantiumRegular Fs14 TexAlCenter " style="">#{opc.nomeAcao} </h3>
                                                    </div>


                                                </h:panelGroup>
                                                <p:tooltip rendered="#{opc.descricao!=null}"
                                                           value="#{opc.descricao}"
                                                           />
                                            </h:panelGroup>
                                        </div>

                                        <f:setPropertyActionListener
                                            target="#{servicosCRM.tipoAtividadeSelecionada}"
                                            value="#{opc}"  />

                                        <p:tooltip for="@parent" style="width:350px" showEvent="mouseover" hideEvent="" trackMouse="true"  autoHide="false" >
                                            <p></p>
                                            <ui:repeat value="#{opc.relacionamentoGerado.tiposAtividadeDisponiveis}"  var="tpAtividade">
                                                #{tpAtividade.nomeAtividade} <span class="#{tpAtividade.icone}" /> <br/>
                                            </ui:repeat>
                                        </p:tooltip>


                                    </p:commandLink>


                                </ui:repeat>

                            </h:panelGroup>
                        </h:form>
                    </h:panelGroup>



                </h:panelGroup>
                <p:separator/>

            </h:panelGroup>
        </p:dialog>

    </cc:implementation>
</ui:composition>