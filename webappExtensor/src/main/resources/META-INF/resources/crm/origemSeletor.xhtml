<ui:composition
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:cc="http://java.sun.com/jsf/composite"
    xmlns:p="http://primefaces.org/ui"
    xmlns:crm="http://xmlns.jcp.org/jsf/composite/crm"
    xmlns:SBInput="http://xmlns.jcp.org/jsf/composite/SBComp/composite/input"
    xmlns:SBAcaoNav="http://xmlns.jcp.org/jsf/composite/SBComp/composite/acoesENavegacao"
    xmlns:SBForm="http://xmlns.jcp.org/jsf/composite/SBComp/composite/formulario"
    xmlns:h="http://xmlns.jcp.org/jsf/html"

    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
    xmlns:SBComp="http://xmlns.jcp.org/jsf/composite/SBComp">
    <!-- INTERFACE -->
    <cc:interface>
        <cc:attribute name="listaSelecao"
                      type="java.util.List" required="true"/>
        <cc:attribute name="origemSelecionada"
                      type="com.super_bits.Casa_Nova.Intranet_Marketing_Digital.model.dados.crm.prospecto.origemProspecto.OrigemProspecto" required="true"/>
        <cc:attribute name="idAtualizacao"
                      type="java.lang.String" required="false"/>

    </cc:interface>
    <!-- IMPLEMENTATION -->
    <cc:implementation>

        <p:selectOneMenu id="advanced" value="#{cc.attrs.origemSelecionada}" converter="conversorGenerico"
                         placeholder="Selecione uma Origem"
                         alwaysDisplayLabel="true"

                         panelStyle="width:280px"  var="origem"
                         filter="true" filterMatchMode="startsWith">
            <p:ajax
                rendered="#{atualizarFormOnChange}"
                event="itemSelect"
                update="#{cc.attrs.idAtualizacao}"/>
            <f:selectItem
                itemLabel="Nenhum Registro selecionado" noSelectionOption="true" value="#{null}" />
            <f:selectItems value="#{cc.attrs.listaSelecao}" var="origem"
                           itemLabel="#{origem.nome}" itemValue="#{origem}"/>

            <p:column style="width:10%"  >
                <f:facet name="header">
                    <h:outputText value="Dono"/>
                </f:facet>

                <crm:origemDono origem="#{origem}" />


            </p:column>

            <p:column>
                <f:facet name="header">
                    <h:outputText value="Nome"/>
                </f:facet>
                <h:outputText value="#{origem.nome}"/>
            </p:column>

            <f:facet name="footer">
                <h:outputText value="#{cc.attrs.listaSelecao.size()} origens"
                              style="font-weight:bold;" styleClass="p-py-1 p-d-block"/>
            </f:facet>
        </p:selectOneMenu>

    </cc:implementation>
</ui:composition>