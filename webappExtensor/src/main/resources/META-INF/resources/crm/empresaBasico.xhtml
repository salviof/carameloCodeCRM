<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:cc="http://java.sun.com/jsf/composite"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:CRM="http://xmlns.jcp.org/jsf/composite/crm"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://xmlns.jcp.org/jsf/core">
    <!-- INTERFACE -->
    <cc:interface>
        <cc:attribute name="empresa"
                      type="br.org.carameloCode.erp.modulo.crm.entidadesJPA.prospecto.PessoaJuridica" required="true"/>


    </cc:interface>
    <!-- IMPLEMENTATION -->
    <cc:implementation>
        <h:panelGroup  id="cardEmpresaBasico"
                       layout="block"
                       style="min-width:  180px; max-width:299px;
                       margin: 20px;
                       position: relative; border-radius: 10px; border: 2px solid #73AD21;
                       padding: 5px;  width: 300px; height: 300px;"
                       styleClass=" #{cc.attrs.empresa.getCampoInstanciadoByNomeOuAnotacao('estiloVisualizacao').valor.estiloCSS}"
                       >
            <h:panelGroup styleClass="empresaCardInfo" layout="block" style="z-index: 100;"  >
                <f:passThroughAttribute name="onClick" value="location.href='#{infoWebApp.getUrlDaAcao(acoesAtendimentoCrm_ProspectoMbGerenciar.prospectoFrmOpcoesDoProspecto,cc.attrs.empresa)}';" />
                <h:panelGroup layout="block" styleClass="OrganizadorContainer">

                    <img class=""  src="#{cc.attrs.empresa.imgPequena}"
                         style="

                         max-width: 50%;
                         max-height:  90px;
                         position: relative;

                         top: 0px;
                         " />
                </h:panelGroup>


                <h:panelGroup layout="block" styleClass=" FontAdamantiumBold Fs18" style="position: absolute;top: 90px; width: 100%; text-align: center">
                    #{cc.attrs.empresa.nome}
                </h:panelGroup>

            </h:panelGroup>
            <h:panelGroup layout="block" styleClass="Fs16" style="position: absolute;bottom: 50px;" >


                <h:panelGroup  layout="block" rendered="#{cc.attrs.empresa.telefonePrincipal!=null}" styleClass="informacaoCardEmpresaBasico"  >
                    <a href="tel:+55#{cc.attrs.empresa.telefonePrincipal}">
                        #{cc.attrs.empresa.telefonePrincipal} </a>
                    <br/>

                </h:panelGroup>

                <h:panelGroup layout="block" rendered="#{cc.attrs.empresa.telefonePrincipal==null}" styleClass="informacaoCardEmpresaBasico"  >
                    Telefone não cadastrado <br/>
                </h:panelGroup>

                <h:panelGroup layout="block" rendered="#{cc.attrs.empresa.site!=null}" styleClass="informacaoCardEmpresaBasico"   >
                    <a href="#{cc.attrs.empresa.site}"   target="siteCliente">
                        #{pgExecutarAtividade.atividade.prospectoEmpresa.site}
                    </a>
                    <br/>
                </h:panelGroup>
                <h:panelGroup layout="block" rendered="#{cc.attrs.empresa.site==null}" styleClass="informacaoCardEmpresaBasico"  >
                    Site não cadastrado<br/>
                </h:panelGroup>

                <h:panelGroup layout="block" styleClass="informacaoCardEmpresaBasico"   >

                    #{cc.attrs.empresa.responsavelPrimeiroNome} | #{cc.attrs.empresa.contatoPrincipal.email}

                    <br/>
                </h:panelGroup>
            </h:panelGroup>

            <h:panelGroup layout="block" style="width: 250px;">
                <CRM:opcoesProspectoQuantidades  empresa="#{cc.attrs.empresa}"/>
            </h:panelGroup>

            <p:commandLink actionListener="#{servicosCRM.exibirModalProspecto(cc.attrs.empresa,acoesAtendimentoCrm_ModalCrmMbProspectos.modalCrmFrmCompartilharProspecto)}"   >
                <h:panelGroup layout="block" styleClass="empresaCardInfo-Responsaveis"  >

                    <ui:repeat value="#{cc.attrs.empresa.usuariosResponsaveis}" var="usuario" >
                        <div style="position: relative;right: 0px;width: 30px; margin: 8px;">
                            <CRM:avatar usuario="#{usuario}" somenteLeitura="#{true}" />
                        </div>
                    </ui:repeat>
                </h:panelGroup>
                <p:ajax event="dialogReturn" listener="#{paginaAtual.comoPaginaComModal.onModalProspectoClose}"
                        />
            </p:commandLink>
            <p:blockUI block="@parent" widgetVar="empresablkcmd#{cc.attrs.empresa.id}" >
                <i class=" fa fa-spinner fa-spin fa-5x fa-fw"></i>
            </p:blockUI>
        </h:panelGroup>




    </cc:implementation>
</ui:composition>