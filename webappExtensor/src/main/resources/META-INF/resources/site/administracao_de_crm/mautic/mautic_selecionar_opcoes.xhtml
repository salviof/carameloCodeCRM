<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:CRCPaginaAtual="http://xmlns.jcp.org/jsf/composite/SBComp/composite/paginaAtualDeEntidade"
    xmlns:SBAcao="http://xmlns.jcp.org/jsf/composite/SBComp/composite/acoesENavegacao"
    xmlns:SBInput="http://xmlns.jcp.org/jsf/composite/SBComp/composite/input"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    template="#{layoutsPaginas.conteudoEmBranco.xhtmlVinculado}"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <ui:define name="conteudo">


        <h:panelGroup layout="block" styleClass="Container12" id="statusConexaoMautic" >
            <table class="w3-table w3-striped w3-border w3-bordered	 w3-centered	" style="margin-left: 0px;">
                <tr>
                    <th>Nome</th>
                    <th>Sistema foi Integrado?</th>
                    <th>Usuário autorizado?</th>
                    <th>status</th>
                </tr>


                <tr>
                    <td>
                        <SBInput:input
                            registro="#{pgMautic.status.getCampoInstanciadoByNomeOuAnotacao('nomeIntegracao')}"
                            desabilitarEdicao="true"
                            layout="#{layoutsComponenteSB.layoutCampo.semLabel}"
                            />
                        <p:commandButton value="Detalhes" type="button" icon="pi pi-external-link" onclick="PF('detalhes#{integracao.id}').show()"/>
                        <p:dialog header="Detalhes" widgetVar="detalhes#{integracao.id}" minHeight="600" width="90%" showEffect="fade" modal="true">
                            <p class="m-0">
                                <h:panelGroup styleClass="Container12 OrganizadorContainer" >
                                    <p:outputLabel value="#{pgMautic.status.caminhoArquivoConfig}"/>
                                    <p:panelGrid columns="6" >
                                        <c:forEach   items="#{pgMautic.status.propriedasdes}" var="prop" >
                                            <p:outputLabel value="#{prop.envname}" />
                                            <p:outputLabel value="#{prop.nomeProp}" />
                                            <p:outputLabel value="#{prop.valorPadrao}" />
                                            <p:outputLabel value="#{prop.tipoPropOrigem}" />
                                            <p:outputLabel value="#{prop.parteValor}" />
                                            <p:outputLabel value="" />
                                        </c:forEach>

                                    </p:panelGrid>
                                </h:panelGroup>
                            </p>
                        </p:dialog>
                    </td>
                    <td class="OrganizadorContainer">
                        <SBInput:input registro="#{pgMautic.status.getCampoInstanciadoByNomeOuAnotacao('sistemaFoiIntegrado')}"
                                       desabilitarEdicao="true"
                                       layout="#{layoutsComponenteSB.layoutCampo.semLabel}"
                                       />
                    </td>
                    <td class="OrganizadorContainer">
                        <SBInput:input
                            registro="#{pgMautic.status.getCampoInstanciadoByNomeOuAnotacao('usuarioFoiIntegrado')}"
                            desabilitarEdicao="true"
                            layout="#{layoutsComponenteSB.layoutCampo.semLabel}"
                            />


                    </td>
                    <td>
                        <h:panelGroup layout="block" id="diagnostico#{pgMautic.status.id}" >
                            <SBInput:input registro="#{pgMautic.status.getCampoInstanciadoByNomeOuAnotacao('diagnostico')}"
                                           desabilitarEdicao="true"
                                           layout="#{layoutsComponenteSB.layoutCampo.semLabel}"
                                           />
                            <p:tooltip for="diagnostico#{pgMautic.status.id}"
                                       rendered="#{!pgMautic.status.sistemaFoiIntegrado}"
                                       value="As chaves de acesso são de responsabilidade da equipe de infra-estrutura"/>
                        </h:panelGroup>
                    </td>

                </tr>


            </table>
        </h:panelGroup>

        <h:form>
            <h:panelGroup layout="block" styleClass="Container12 OrganizadorContainer" >
                <p:commandButton actionListener="#{pgMautic.conectarMautic()}" update="statusConexaoMautic" icon="fa fa-plug"  renderDisabledClick="#{!pgMautic.status.sistemaFoiIntegrado}"
                                 value="Conectar agora"
                                 />
            </h:panelGroup>
            <SBAcao:botaoDeAcao metodo="#{pgMautic.executarAcaoSelecionada()}"
                                acao="#{acoesAdminCrm_MauticMbIntegracao.mauticCtrExportarDados}"
                                armazenamentoAcaoExecutada="#{pgPaginaInicial.acaoSelecionada}"
                                tipoVisualizacao="#{layoutsComponenteSB.layoutBotoes.iconeENome}"
                                trasformarAcaoEmLink="true"
                                rendered="#{infoWebApp.emModoDesenvolvimentoHomologacao}"
                                classeEstilo="botaoVerde"
                                />
        </h:form>

    </ui:define>
</ui:composition>