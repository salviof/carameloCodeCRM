<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    template="#{layoutsPaginas.conteudoEmBranco.xhtmlVinculado}"
    xmlns:SBBotaoAcao="http://xmlns.jcp.org/jsf/composite/SBComp/composite/acoesENavegacao"
    xmlns:p="http://primefaces.org/ui"
    xmlns:crmDashBoard="http://xmlns.jcp.org/jsf/composite/dashboard"
    xmlns:SBCRM="http://xmlns.jcp.org/jsf/composite/crm"
    xmlns:SBInput="http://xmlns.jcp.org/jsf/composite/SBComp/composite/input"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <ui:define name="conteudo" >
        <h:panelGroup  styleClass="Fright" layout="block" style="position: absolute;top: 100px;right: 10px" >
            <h:panelGroup layout="block" styleClass="quebraBlocoComEspacoVertical150 somenteMobile"/>
            <h:panelGroup layout="block" styleClass="quebraBlocoComEspacoVertical20 somenteMobile"/>
            <h:form>
                <SBCRM:botaoGrande acao="#{acoesClienteContato_ChamadoMbGestao.chamadoFrmNovo}"
                                   estilo="botaoGrandeDestaque"
                                   />
            </h:form>
        </h:panelGroup>
        <h:panelGroup style="margin-top: 20px; height: 900px; background-color: aliceblue; padding-top: 20px;"  styleClass="Container12" layout="block" >

            <h1 style="text-align: center;color:darkcyan;" class="Fs30"> MEUS CHAMADOS EM ABERTO            </h1>

            <h:panelGroup styleClass="Container12 OrganizadorContainer" style="margin-top: 20px;" layout="block">
                <h:panelGroup layout="block" styleClass="quebraBlocoComEspacoVertical150 somenteMobile"/>
                <h:panelGroup styleClass="Container8" layout="block">

                </h:panelGroup>
            </h:panelGroup>

            <h:panelGroup   styleClass="Container12 OrganizadorContainer" style="margin-top: 90px;" layout="block" id="listaChamadosMobile" rendered="#{paginaAtual.sessao.telaUsuario.umMobile}" >
                <c:forEach items="#{pgSuporteCliente.entidadesListadas}" var="chamado" >
                    <p:separator styleClass="quebraBlocoComEspacoVertical10"/>
                    <crmDashBoard:dashBoardIconeValorTituloLink container="Container3"
                                                                url="#{pgSuporteCliente.getUrlChamado(chamado)}"
                                                                icone="fa fa-life-ring"
                                                                titulo="#{pgUtilDataHoraFormato.getDataHoraSimplificado(chamado.dataHoraCriacao)}" valor="#{chamado.titulo}" codigoestilo="3" />
                </c:forEach>


            </h:panelGroup>


            <h:panelGroup   styleClass="Container12" style="margin-top: 50px;" layout="block" id="listaChamados" rendered="#{!paginaAtual.sessao.telaUsuario.umMobile}" >
                <h:form>
                    <p:dataTable var="chamado" value="#{pgSuporteCliente.entidadesListadas}"
                                 reflow="true"

                                 rows="20"
                                 paginator="true"
                                 widgetVar="chamados"
                                 selection="#{pgSuporteCliente.entidadeSelecionada}"
                                 selectionMode="single"
                                 rowKey="#{chamado}"
                                 lazy="false"
                                 paginatorPosition="bottom"
                                 >
                        <f:facet name="header">
                            <p:outputPanel>


                            </p:outputPanel>
                        </f:facet>
                        <f:facet name="footer" >

                        </f:facet>

                        <p:ajax event="rowSelect" listener="#{pgSuporteCliente.abrirChamado()}"

                                onstart="bloquearArea('#{pgUtil.gerarCaminhoCompletoID('listaChamados')}')"
                                />
                        <p:column
                            headerText="Código" width="15px;"  styleClass="Fs20" style="#{paginaAtual.sessao.telaUsuario.umMobile?'text-align: left;':'text-align: center;'}" displayPriority="0"  >
                            #{chamado.getCampoInstanciadoByNomeOuAnotacao('id').valor}
                        </p:column>
                        <p:column headerText="Criado em:" width="15px" sortable="true" sortBy="#{chamado.dataHoraCriacao}" styleClass="Fs20"  style="#{paginaAtual.sessao.telaUsuario.umMobile?'text-align: left;':'text-align: center;'}"  >
                            #{pgUtil.gerarDataHoraTexto(chamado.getCampoByNomeOuAnotacao('dataHoraCriacao').valor)}
                        </p:column>
                        <p:column headerText="Responsável" width="35px"  styleClass="Fs20"
                                  style="#{paginaAtual.sessao.telaUsuario.umMobile?'text-align: left;':'text-align: center;'} height:100px; position: relative;"

                                  displayPriority="1" >
                            <div style="display: flex;
                                 justify-content: space-around;
                                 display: -webkit-flex; /* Safari */
                                 -webkit-flex-wrap: wrap; /* Safari 6.1+ */
                                 display: flex;

                                 flex-wrap: wrap;">
                                <SBCRM:avatar usuario="#{chamado.atendenteResponsavel}" somenteLeitura="true"  rendered="#{chamado.atendenteResponsavel!=null}" altura="92" />

                                <h:outputText value="Não definido" rendered="#{chamado.atendenteResponsavel==null}" />
                            </div>


                        </p:column>
                        <p:column headerText="Tipo" width="35px"  styleClass="Fs20" style="#{paginaAtual.sessao.telaUsuario.umMobile?'text-align: left;':'text-align: center;'} "   displayPriority="2" >
                            #{chamado.tipoChamado.nome}
                        </p:column>
                        <p:column headerText="Status" width="35px"  styleClass="Fs20" style="#{paginaAtual.sessao.telaUsuario.umMobile?'text-align: left;':'text-align: center;'}"  displayPriority="2" >
                            #{chamado.status.nome}
                        </p:column>

                    </p:dataTable>
                </h:form>
            </h:panelGroup>
            <h:panelGroup styleClass="Container12 OrganizadorContainerDireita " style="margin: 100px;" layout="block" >

            </h:panelGroup>
        </h:panelGroup>

    </ui:define>
</ui:composition>