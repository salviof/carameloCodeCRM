<!-- template conteÃºdo com formulario-->
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:SBInput="http://xmlns.jcp.org/jsf/composite/SBComp/composite/input"
    xmlns:SBBotao="http://xmlns.jcp.org/jsf/composite/SBComp/composite/acoesENavegacao"
    xmlns:SBFormulario="http://xmlns.jcp.org/jsf/composite/SBComp/composite/formulario"
    xmlns:SBPaginaAtual="http://xmlns.jcp.org/jsf/composite/SBComp/composite/paginaAtualDeEntidade"
    template="#{layoutsPaginas.formularioAcaoAtualDaEntidade.xhtmlVinculado}"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <ui:define name="conteudo">
        <h:panelGroup layout="block" styleClass="OrganizadorContainer Container12" id="Chamado" >
            <p:fieldset legend="Tipo de chamado" styleClass="Container6" >
                <p:selectOneButton value="#{pgSuporteCliente.entidadeSelecionada.getCampoByNomeOuAnotacao('tipoChamado').valor}" id="tipoChamado" required="true"
                                   converter="conversorGenerico"
                                   requiredMessage="Por favor, clique  no tipo de chamado"
                                   >
                    <f:passThroughAttribute name="caminhoCampo" value="#{pgSuporteCliente.entidadeSelecionada.getCampoByNomeOuAnotacao('tipoChamado').nomeCompostoIdentificador}" />
                    <f:passThroughAttribute name="dominio" value="#{pgSuporteCliente.entidadeSelecionada.getCampoByNomeOuAnotacao('tipoChamado').nomeClasseOrigemAtributo}" />
                    <f:passThroughAttribute name="campoInstanciado" value="#{pgSuporteCliente.entidadeSelecionada.getCampoByNomeOuAnotacao('tipoChamado')}" />
                    <c:forEach var="tipoChamado" items="#{pgSuporteCliente.entidadeSelecionada.getCampoByNomeOuAnotacao('tipoChamado').comoCampoSeltorItem.origem}" >
                        <f:selectItem itemLabel="#{tipoChamado.nome}" itemValue="#{tipoChamado}"/>
                    </c:forEach>

                    <p:ajax
                        event="change"
                        update="tipoChamado"
                        process="@this"
                        listener="#{pgSuporteCliente.salvarDescritivoTemporario()}"
                        />
                </p:selectOneButton>
                <p:message for="tipoChamado"

                           />
            </p:fieldset>
        </h:panelGroup>



        <h:panelGroup style="width: 100%;" styleClass="Container8 Responsive" id="relatorioAtividade">

            <p:fragment >
                <p:textEditor widgetVar="editor2"

                              value="#{pgSuporteCliente.entidadeSelecionada.getCampoByNomeOuAnotacao('descricao').valor}"
                              height="300" placeholder="Descreva sua dor ou desejo aqui."
                              validator="org.super_bits.view.validadores.generico"
                              id="descritivoChamados"
                              secure="false"
                              >
                    <f:passThroughAttribute name="caminhoCampo" value="#{pgSuporteCliente.entidadeSelecionada.getCampoByNomeOuAnotacao('descricao').nomeCompostoIdentificador}" />
                    <f:passThroughAttribute name="dominio" value="#{pgSuporteCliente.entidadeSelecionada.getCampoByNomeOuAnotacao('descricao').nomeClasseOrigemAtributo}" />
                    <f:passThroughAttribute name="campoInstanciado" value="#{pgSuporteCliente.entidadeSelecionada.getCampoByNomeOuAnotacao('descricao')}" />
                    <p:ajax
                        event="blur"
                        onstart="bloquearArea('#{pgUtil.getNomeIdPFieldSetPai(component)}')"
                        oncomplete="desbloquearArea('#{pgUtil.getNomeIdPFieldSetPai(component)}')"


                        listener="#{pgSuporteCliente.salvarDescritivoTemporario()}"
                        />
                    <f:facet name="toolbar">
                        <span class="ql-formats">
                            <button class="ql-bold"></button>
                            <button class="ql-italic"></button>
                            <button class="ql-underline"></button>
                            <button class="ql-strike"></button>
                        </span>
                        <span class="ql-formats">
                            <select class="ql-font"></select>
                            <select class="ql-size"></select>
                        </span>
                    </f:facet>
                </p:textEditor>
                <p:message for="descritivoChamados"

                           />

                <p:poll interval="10" listener="#{pgSuporteCliente.salvarDescritivoTemporario()}" />
            </p:fragment>
        </h:panelGroup>


    </ui:define>

    <ui:define name="botoesDeAcao">
        <h:panelGroup  styleClass="Fright Container12" >
            <h:panelGroup styleClass="Container3 Fright"  style="margin: 10px">
                <SBBotao:botaoDeAcao_Pagina update="@form" classeEstilo="botaoVerde" acao="#{acoesClienteContato_ChamadoMbGestao.chamadoCtrAbrirChamado}" tipoVisualizacao="#{layoutsComponenteSB.layoutBotoes.iconeENome}"/>
            </h:panelGroup>
            <h:panelGroup styleClass="Container3 Fright" style="margin: 10px" >
                <SBPaginaAtual:botaoSalvarAlteracoes  />
            </h:panelGroup>

        </h:panelGroup>


    </ui:define>
</ui:composition>