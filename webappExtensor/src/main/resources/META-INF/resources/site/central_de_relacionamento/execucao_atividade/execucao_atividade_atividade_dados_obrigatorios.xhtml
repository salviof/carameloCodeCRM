<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:SBInput="http://xmlns.jcp.org/jsf/composite/SBComp/composite/input"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
    xmlns:SBAcaoNav="http://xmlns.jcp.org/jsf/composite/SBComp/composite/acoesENavegacao"
    xmlns:CRM="http://xmlns.jcp.org/jsf/composite/crm"

    xmlns:f="http://xmlns.jcp.org/jsf/core">

    <CRM:cabecalhoAtividade
        atividade="#{pgExecutarAtividade.atividade}">
        <f:facet name="opcoesCabecalhoAtividade">
            <p:fieldset rendered="#{pgExecutarAtividade.atividade.dadosNaoColetados.size()>0}"  >

                <div class="alert alert-warning Fs20  FontAdamantiumLight" >
                    <i class="fa fa-exclamation fa-2x" style="margin-right: 10px;" />  <strong>Falta informação para proseguir!</strong> Os Seguintes dados ainda não foram cadastradados:
                    <p:dataList value="#{pgExecutarAtividade.atividade.dadosNaoColetados}" var="item">


                        #{item.tipoDadoCRM.label}



                    </p:dataList>
                    <div class="Container12">

                    </div>
                </div>
            </p:fieldset>

            <p:fieldset rendered="#{pgExecutarAtividade.atividade.dadosNaoColetados.size()==0}"  >

                <div class="alert alert-warning Fs20  FontAdamantiumLight" >
                    <i class="fa fa-exclamation fa-2x" style="margin-right: 10px;" />  <strong>Revise os dados!</strong> Revise os dados da atividade


                    <div class="Container12">

                    </div>
                </div>
            </p:fieldset>
        </f:facet>
    </CRM:cabecalhoAtividade>







    <p:fieldset legend="Os seguintes dados são nescesssários para o relacionamento: #{pgExecutarAtividade.atividade.tipoAtividade.relacionamentoGerado.nome}"
                styleClass="Container12"
                id="dadosNaoCadastrados"
                >


        <p:outputLabel value="Nenhuma informação obrigatória está pendente para proseguir para o pŕoximo relacionamento"
                       rendered="#{pgExecutarAtividade.atividade.permitidoConcluir}" />




        <h:panelGroup   rendered="#{!pgExecutarAtividade.atividade.permitidoConcluir}" >

            <h:panelGroup rendered="#{pgExecutarAtividade.atividade.dadosNaoColetados.size()==0}" >

                <div class="alert alert-info" >
                    <strong>Restam atividaes para #{pgExecutarAtividade.atividade.tipoAtividade.nomeFimAtividade}:</strong>
                    #{pgExecutarAtividade.atividade.tipoBloqueioTexto}
                </div>



            </h:panelGroup>
            <h:form>
                <h:panelGroup styleClass="Container12" >

                    <ui:repeat value="#{pgExecutarAtividade.dadosDaAtividade}"  var="dado" varStatus="recNum">
                        <h:panelGroup  styleClass="Container3" style="padding: 10px;">
                            <c:catch var="erro">

                                <SBInput:input  registro="#{dado.campoInstanciado}"
                                                layout="#{layoutsComponenteSB.layoutCampo.superior}"
                                                />

                            </c:catch>
                            <c:if test="#{erro!=null}" >
                                #{erro}
                            </c:if>
                        </h:panelGroup>
                    </ui:repeat>

                </h:panelGroup>


                <CRM:opcoesAtividadeDadosDinamicos atividade="#{pgExecutarAtividade.atividade}"  />
            </h:form>
        </h:panelGroup>


    </p:fieldset >







    <h:form>
        <p:remoteCommand    autoRun="true" update="@(.ui-fieldset)"/>
    </h:form>

</ui:composition>

