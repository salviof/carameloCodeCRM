<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:CRM="http://xmlns.jcp.org/jsf/composite/crm"
    xmlns:SBLogin="http://xmlns.jcp.org/jsf/composite/SBComp/composite/login"
    xmlns:SBComp="http://xmlns.jcp.org/jsf/composite/SBComp"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    template="#{layoutsPaginas.conteudoEmBranco.xhtmlVinculado}"
    xmlns:p="http://primefaces.org/ui"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
    xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:define name="conteudo">
        <h:form>



            <p:fieldset legend="Origens compartilhada" styleClass="Container12" >
                <h:panelGroup styleClass="Container12 OrganizadorContainer"  layout="block"  >
                    <ui:repeat value="#{pgDashBoardAtendimento.pesquisaLead.getCampoInstanciadoByNomeOuAnotacao('origensPrivadasCompatilhadas').valor}" var="origem"  >
                        <h:panelGroup styleClass="Container3 dashboard"  layout="block"  >
                            <div class="ui-g card colorbox colorbox-2">
                                <div class="ui-g-4">
                                    <h:panelGroup styleClass="Container12 dashboard" style="background-color: white;"  layout="block"  >
                                        <SBLogin:avatar porcentagemTamanhoFoto="35%" rendered="#{origem.umaOrigemPrivada}" />
                                    </h:panelGroup>
                                    <ui:repeat value="#{origem.getCampoInstanciadoByNomeOuAnotacao('usuariosComAcesso').valor}"
                                               var="usuarioCompartilhado" >
                                        <div style="position: relative;right: 0px;width: 30px; margin: 8px;">
                                            <CRM:avatar usuario="#{usuarioCompartilhado}" somenteLeitura="#{true}" />
                                        </div>
                                    </ui:repeat>
                                </div>
                                <div class="ui-g-8">
                                    <span class="colorbox-name">#{origem.nome}</span>
                                    <h:panelGroup styleClass="colorbox-count" id="quantidadeLeads" >
                                        #{origem.getCampoInstanciadoByNomeOuAnotacao('quantidadeLeads').valor}/#{origem.getCampoInstanciadoByNomeOuAnotacao('quantidadeLeads').valor}
                                        <p:tooltip  for="@parent" position="right"
                                                    value="#{origem.getCampoInstanciadoByNomeOuAnotacao('quantidadeLeads').valor} em Meus leads de #{origem.getCampoInstanciadoByNomeOuAnotacao('quantidadeLeads').valor}" />
                                    </h:panelGroup>
                                    <p:pieChart model="#{servicoGraficosLeads.getGraficoDeOrigem(origem).grafico}"
                                                style="width:100%;height:400px"  >


                                        <p:ajax event="itemSelect"
                                                update="#{layoutIdsAreasConhecidas.AREA_CONTEUDO}"
                                                async="true"
                                                listener="#{servicoGraficosLeads.getGraficoDeOrigem(origem).itemGraficoMeusAtendentesOrigem}" />

                                    </p:pieChart>

                                </div>
                            </div>
                        </h:panelGroup>

                    </ui:repeat>
                </h:panelGroup>
            </p:fieldset>
        </h:form>
    </ui:define>
</ui:composition>