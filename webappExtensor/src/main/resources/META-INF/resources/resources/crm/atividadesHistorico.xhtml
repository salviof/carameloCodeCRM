<ui:composition
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:cc="http://java.sun.com/jsf/composite"
    xmlns:p="http://primefaces.org/ui"
    xmlns:CRM="http://xmlns.jcp.org/jsf/composite/crm"
    xmlns:SBInput="http://xmlns.jcp.org/jsf/composite/SBComp/composite/input"
    xmlns:SBAcaoNav="http://xmlns.jcp.org/jsf/composite/SBComp/composite/acoesENavegacao"
    xmlns:SBForm="http://xmlns.jcp.org/jsf/composite/SBComp/composite/formulario"
    xmlns:h="http://xmlns.jcp.org/jsf/html"

    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <!-- INTERFACE -->
    <cc:interface>
        <cc:attribute name="atividadesRealizadas"
                      type="java.util.List" required="true"/>

    </cc:interface>
    <!-- IMPLEMENTATION -->
    <cc:implementation>

        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Data</th>
                    <th>Usuário </th>
                    <th>Ação</th>
                    <th>Relacionamento</th>
                    <th>Arquivos</th>
                    <th>Email</th>
                    <th>Comentário    </th>
                </tr>
            </thead>
            <tbody>

                <c:forEach items="#{cc.attrs.atividadesRealizadas}" var="atividade" >
                    <tr scope="row">

                        <td class="col-md-1">#{pgUtil.gerarDataTexto(atividade.dataHoraRealizacao)} </td>
                        <td class="col-md-1"><CRM:avatar usuario="#{atividade.usuarioAtividade}" somenteLeitura="true"/></td>
                        <td class="col-md-2"><i class="#{atividade.tipoAtividade.icone}" style="color:##{atividade.tipoAtividade.cor} "></i> #{atividade.tipoAtividade.nomeAcao}</td>
                        <td class="col-md-1"> #{atividade.relacionamentoGerado.nome}</td>
                        <td class="col-md-1">
                            <c:forEach items="#{atividade.documentosGerados}" var="documento" >
                                <a href="#{documento.getCampoInstanciadoByNomeOuAnotacao('arquivo').comoArquivoDeEntidade.linkAbrirArquivo}" ><i class="fa fa-file-pdf-o" aria-hidden="true"></i> </a>
                            </c:forEach>


                        </td>
                        <td class="col-md-1"><h:panelGroup rendered="#{atividade.emailVinculado!=null}" > <a href="#{infoWebApp.getUrlDaAcao(acoesAtendimentoCrm_EmailsMbGestao.emailsFrmVisualizarEmail,atividade.prospectoEmpresa)}"> #{atividade.emailVinculado.assunto}</a> </h:panelGroup></td>
                        <td class="col-md-7">#{atividade.anotacoes}</td>

                    </tr>

                </c:forEach>

            </tbody>
        </table>

    </cc:implementation>
</ui:composition>