<ui:composition
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:cc="http://java.sun.com/jsf/composite"
    xmlns:p="http://primefaces.org/ui"
    xmlns:CRM="http://xmlns.jcp.org/jsf/composite/crm"
    xmlns:SBInput="http://xmlns.jcp.org/jsf/composite/SBComp/composite/input"
    xmlns:SBAcaoNav="http://xmlns.jcp.org/jsf/composite/SBComp/composite/acoesENavegacao"
    xmlns:SBForm="http://xmlns.jcp.org/jsf/composite/SBComp/composite/formulario"
    xmlns:h="http://xmlns.jcp.org/jsf/html"

    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <!-- INTERFACE -->
    <cc:interface>
        <cc:attribute name="empresa"
                      type="br.org.carameloCode.erp.modulo.crm.entidadesJPA.prospecto.PessoaJuridica" required="true"/>
        <cc:attribute name="tipoVisualizacaoCampo"  required="true"  default="#{layoutsComponenteSB.layoutCampo.resumido}}"/>
        <cc:attribute name="tipoVisualizacaoBotoes"  required="true"  default="#{layoutsComponenteSB.layoutBotoes.icone}"/>
    </cc:interface>
    <!-- IMPLEMENTATION -->
    <cc:implementation>

        <h:panelGroup  rendered="#{cc.attrs.empresa!=null}" >

            <h:panelGroup  rendered="#{cc.attrs.tipoVisualizacaoBotoes eq layoutsComponenteSB.layoutBotoes.icone}"   >


                <p:commandButton id="opcoesProsp" icon="fa fa-sort-desc"  type="button"  />
                <p:overlayPanel  for="opcoesProsp" >
                    <div style="width: 250px;display: flex;flex-wrap: wrap;justify-content:space-around;">
                        <c:forEach items="#{servicosCRM.acoesModal}" var="acaoModal" >
                            <h:panelGroup  styleClass="Container2" style="margin: 10px;" >

                                <SBAcaoNav:botaoDeAcao metodo="#{servicosCRM.exibirModalProspecto(cc.attrs.empresa, acaoModal)}"
                                                       acao="#{acaoModal}"
                                                       tipoVisualizacao="#{cc.attrs.tipoVisualizacaoBotoes}"
                                                       />
                            </h:panelGroup>
                        </c:forEach>
                    </div>
                </p:overlayPanel>

            </h:panelGroup  >

            <h:panelGroup   rendered="#{!(cc.attrs.tipoVisualizacaoBotoes eq layoutsComponenteSB.layoutBotoes.icone)}">
                <div class="Container8 Fright">
                    <p:fieldset legend="Opções Rápidas para Propécto" toggleable="true" collapsed="true" >
                        <div class="OrganizadorContainerExpandido" style="">
                            <c:forEach  items="#{servicosCRM.acoesModal}" var="acaoModal" >
                                <p:commandLink actionListener="#{servicosCRM.exibirModalProspecto(cc.attrs.empresa, acaoModal)}">
                                    <div class="btnSeletor-small btnSeletor-Bkg w3-border w3-btn btn">
                                        <i class="#{acaoModal.icone} fa-2x " style="top: 15px; position: absolute; left:  26px;color: #008000!important"></i>

                                        <div class="label "
                                             style="position: absolute;bottom: 5px;left: 0px;color: #000000!important; line-break: normal; max-width:  90px; height: 20px; white-space: pre-wrap;
                                             white-space: -moz-pre-wrap;
                                             white-space: -pre-wrap;
                                             white-space: -o-pre-wrap;
                                             word-wrap: break-word;
                                             ">#{acaoModal.nomeAcao}</div>

                                    </div>
                                    <p:tooltip for="@parent" value="#{acaoModal.descricao}" />

                                </p:commandLink>
                            </c:forEach>


                        </div>
                    </p:fieldset>
                </div>
            </h:panelGroup>


        </h:panelGroup>
    </cc:implementation>
</ui:composition>