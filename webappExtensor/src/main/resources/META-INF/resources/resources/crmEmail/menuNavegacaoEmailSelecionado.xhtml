

<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:cc="http://java.sun.com/jsf/composite"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:SBAcaoNav="http://xmlns.jcp.org/jsf/composite/SBComp/composite/acoesENavegacao"
    xmlns:crmEmail="http://xmlns.jcp.org/jsf/composite/crm"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://xmlns.jcp.org/jsf/core">


    <!-- INTERFACE -->
    <cc:interface>
        <cc:attribute name="email"
                      type="br.org.carameloCode.erp.modulo.crm.entidadesJPA.mail.EmailCrm" required="true"/>
        <cc:attribute name="umEmailDeProspecto"
                      default="#{cc.attrs.email.getCampoInstanciadoByNomeOuAnotacao('umEmailDeProspecto').valorComoBoolean}"
                      />

        <cc:attribute name="umEmailRecebido"
                      default="#{cc.attrs.email.getCampoInstanciadoByNomeOuAnotacao('umEmailRecebido').valorComoBoolean}"
                      />


        <cc:attribute name="umEmailEnviado"
                      default="#{!cc.attrs.email.getCampoInstanciadoByNomeOuAnotacao('umEmailRecebido').valorComoBoolean}"
                      />



    </cc:interface>
    <!-- IMPLEMENTATION -->
    <cc:implementation>


        <div class="card">

            <p:breadCrumb styleClass="MenuNavegacao"  homeDisplay="text">
                <p:menuitem value="Meus Emails" url="#{infoWebApp.getUrlDaAcao(acoesAtendimentoCrm_EmailsMbGestao.emailsFrmListarUltmosEmails)}"
                            rendered="#{!cc.attrs.umEmailDeProspecto}"

                            />

                <p:menuitem value="Enviados e recebidos: #{cc.attrs.email.prospecto.nome}"
                            rendered="#{cc.attrs.umEmailDeProspecto}"
                            url="#{infoWebApp.getUrlDaAcao(acoesAtendimentoCrm_EmailsMbGestao.emailsFrmEmailsDoProspecto ,cc.attrs.email.prospecto)}"
                            />
                <p:menuitem value="E-mails Recebidos"
                            rendered="#{cc.attrs.email.getCampoInstanciadoByNomeOuAnotacao('umEmailRecebido').valorComoBoolean}"
                            url="#{infoWebApp.getUrlDaAcao(acoesAtendimentoCrm_EmailsMbGestao.emailsFrmListarRecebido,cc.attrs.email.prospecto)}" />

                <p:menuitem value="E-mails Enviados"
                            rendered="#{!cc.attrs.umEmailRecebido and !cc.attrs.umEmailDeProspecto}"
                            url="#{infoWebApp.getUrlDaAcao(acoesAtendimentoCrm_EmailsMbGestao.emailsFrmListarEnviados)}" />
                <p:menuitem value="E-mails Enviados"
                            rendered="#{!cc.attrs.umEmailRecebido and cc.attrs.umEmailDeProspecto}"
                            url="#{infoWebApp.getUrlDaAcao(acoesAtendimentoCrm_EmailsMbGestao.emailsFrmListarEnviados,cc.attrs.email.prospecto)}" />


                <p:menuitem value="Email #{pgEmails.entidadeSelecionada.assunto}" url="#" />

            </p:breadCrumb>
        </div>


    </cc:implementation>
</ui:composition>