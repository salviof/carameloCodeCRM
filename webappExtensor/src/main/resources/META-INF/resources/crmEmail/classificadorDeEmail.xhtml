

<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:cc="http://java.sun.com/jsf/composite"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:SBAcaoNav="http://xmlns.jcp.org/jsf/composite/SBComp/composite/acoesENavegacao"
    xmlns:crmEmail="http://xmlns.jcp.org/jsf/composite/crm"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:sb="http://superbitsframework/ui"
    xmlns:f="http://xmlns.jcp.org/jsf/core">


    <!-- INTERFACE -->
    <cc:interface>
        <cc:attribute name="email"
                      type="br.org.carameloCode.erp.modulo.crm.entidadesJPA.mail.EmailCrm" required="true"/>
        <cc:attribute name="umEmailDeProspecto"
                      default="#{cc.attrs.email.getCampoInstanciadoByNomeOuAnotacao('umEmailDeProspecto').valorComoBoolean}"
                      />

        <cc:attribute name="umEmailRecebido"
                      default="#{cc.attrs.email.getCampoInstanciadoByNomeOuAnotacao('umEmailRecebido').valorComoBoolean}"
                      />


        <cc:attribute name="umEmailEnviado"
                      default="#{!cc.attrs.email.getCampoInstanciadoByNomeOuAnotacao('umEmailRecebido').valorComoBoolean}"
                      />



    </cc:interface>
    <!-- IMPLEMENTATION -->
    <cc:implementation>

        <p:panelGrid columns="3"  columnClasses="coluna40Pixel,coluna40Pixel,coluna300Pixel" styleClass="classificarEmail" >
            <p:commandButton icon="#{acoesAtendimentoCrm_EmailsMbGestao.emailsCtrRelatarSpan.icone}"
                             action="#{servicoEmail.relatarSpan(cc.attrs.email)}"
                             update="#{pgUtil.getNomeIdPFieldSetPai(component)}"
                             >
                <f:setPropertyActionListener target="#{paginaAtual.infoPagina.comoPaginaEntidade.entidadeSelecionada}"  value="#{cc.attrs.email}"/>
                <f:setPropertyActionListener target="#{servicoEmail.acaoDeEmailExecucao}"  value="#{acoesAtendimentoCrm_EmailsMbGestao.emailsCtrRelatarSpan}"/>
            </p:commandButton>
            <p:commandButton icon="#{acoesAtendimentoCrm_EmailsMbGestao.emailsCtrAtribuirPrivado.icone}"
                             action="#{paginaAtual.infoPagina.comoPaginaEntidade.executarAcao(cc.attrs.email)}"
                             update="#{pgUtil.getNomeIdPFieldSetPai(component)}"
                             >
                <f:setPropertyActionListener
                    target="#{pgEmails.entidadeSelecionada}"
                    value="#{cc.attrs.email}"
                    />

                <f:setPropertyActionListener target="#{pgEmails.acaoSelecionada}"  value="#{acoesAtendimentoCrm_EmailsMbGestao.emailsCtrAtribuirPrivado}"
                                             />
            </p:commandButton>
            <h:panelGroup  layout="block" >
                <p:fragment  >

                    <ui:fragment >


                        <ui:param name="xhtmlINPUT" value="#{mail.getCampoInstanciadoByNomeOuAnotacao('prospecto').getComponenteDiferenciado(layoutCampoEspecial).xhtmlJsfCaminhoRelativo}" />

                        <ui:param name="layout" value="#{layoutsComponenteSB.layoutCampo.resumido }"/>
                        <ui:param name="registro" value="#{cc.attrs.email.getCampoInstanciadoByNomeOuAnotacao('prospecto')}" />
                        <ui:param name="componente" value="#{cc.attrs.email.getCampoInstanciadoByNomeOuAnotacao('prospecto').getComponenteDiferenciado(layoutCampoEspecial)}"  />
                        <ui:param name="prefixoID" value="#{cc.attrs.email.getCampoInstanciadoByNomeOuAnotacao('prospecto').prefixoUnicoParaIDHtml}"  />
                        <ui:param name="valor" value="#{cc.attrs.email.getCampoInstanciadoByNomeOuAnotacao('prospecto').valor}"/>
                        <ui:param name="obrigatorio" value="true"/>
                        <ui:param name="nomeItem" value="#{cc.attrs.email.getCampoInstanciadoByNomeOuAnotacao('prospecto').label}"/>
                        <ui:param  name="lista" value="#{cc.attrs.email.getCampoInstanciadoByNomeOuAnotacao('prospecto').listaDeOpcoes}"/>
                        <ui:param name="metodoJSOnfocus" value="#{idAtualizarOnChange ne pgUtil.getIdInputSBComponentePai(component)?'mesclarOnChangeComDelay(this.id)':''}" />
                        <h:panelGrid columns="2" styleClass="classificarEmail" columnClasses="coluna300Pixel,coluna40Pixel"  >
                            <h:panelGroup  class="inputCampo inputCampoResumido" layout="block" >
                                <sb:inputSBSelAutoCompletar   />
                            </h:panelGroup>

                            <p:commandButton icon="#{acoesAtendimentoCrm_EmailsMbGestao.emailsCtrAtribuirPesssoa.icone}"
                                             value="Atribuir Ã  empresa"
                                             action="#{pgEmails.executarAcao(cc.attrs.email)}"
                                             update="#{pgUtil.getNomeIdPFieldSetPai(component)}"
                                             >
                                <f:setPropertyActionListener target="#{pgEmails.entidadeSelecionada}"  value="#{mail}"
                                                             />
                                <f:setPropertyActionListener target="#{pgEmails.acaoSelecionada}"  value="#{acoesAtendimentoCrm_EmailsMbGestao.emailsCtrAtribuirPesssoa}"
                                                             />
                            </p:commandButton>
                        </h:panelGrid>


                    </ui:fragment>





                </p:fragment>
            </h:panelGroup>
        </p:panelGrid>


    </cc:implementation>
</ui:composition>